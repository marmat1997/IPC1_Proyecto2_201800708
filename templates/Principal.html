<!DOCTYPE html>
<!-- saved from url=(0065)https://www.w3schools.com/w3css/tryw3css_templates_analytics.htm# -->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Inicio</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./static/w3.css">
  <link rel="stylesheet" href="./static/css">
  <link rel="stylesheet" href="./static/nicepage.css" media="screen">
  <script src="./static/html2pdf.bundle.min.js"></script>
  <script src="./static/script.js"></script>
  <!--  <link rel="stylesheet" href="./static/font-awesome.min.css">  -->

  <style>
    html,
    body,
    h1,
    h2,
    h3,
    h4,
    h5 {
      font-family: "Raleway", sans-serif
    }
  </style>

  <style class="u-style">
    .u-section-5 {
      background-image: none;
    }


    .u-section-5 .u-list-1 {
      margin: 20px auto 60px 0;
    }

    .u-section-5 .u-repeater-1 {
      grid-template-columns: repeat(3, calc(33.3333% - 13.3333px));
      min-height: 561px;
      grid-gap: 20px;
    }

    .u-section-5 .u-list-item-1 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-1 {
      padding: 20px;
    }

    .u-section-5 .u-image-1 {
      height: 196px;
      margin-top: 0;
      margin-bottom: 0;
    }

    .u-section-5 .u-text-2 {
      font-size: 1.5rem;
      text-transform: none;
      font-weight: 700;
    }

    .u-section-5 .u-text-3 {
      font-style: normal;
    }

    .u-section-5 .u-list-item-2 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-2 {
      padding: 20px;
    }

    .u-section-5 .u-image-2 {
      height: 196px;
      margin-bottom: 0;
      margin-top: 0;
    }

    .u-section-5 .u-text-4 {
      font-size: 1.5rem;
      text-transform: none;
      font-weight: 700;
    }

    .u-section-5 .u-text-5 {
      font-style: normal;
    }

    .u-section-5 .u-list-item-3 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-3 {
      padding: 20px;
    }

    .u-section-5 .u-image-3 {
      height: 196px;
      margin-top: 0;
      margin-bottom: 0;
    }

    .u-section-5 .u-text-6 {
      font-weight: 700;
      font-size: 1.5rem;
      text-transform: none;
    }

    .u-section-5 .u-text-7 {
      font-style: normal;
    }

    .u-section-5 .u-list-item-3 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-3 {
      padding: 20px;
    }

    .u-section-5 .u-image-4 {
      height: 196px;
      margin-top: 0;
      margin-bottom: 0;
    }

    .u-section-5 .u-text-6 {
      font-weight: 700;
      font-size: 1.5rem;
      text-transform: none;
    }

    .u-section-5 .u-text-7 {
      font-style: normal;
    }

    .u-section-5 .u-list-item-3 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-3 {
      padding: 20px;
    }

    .u-section-5 .u-image-5 {
      height: 196px;
      margin-top: 0;
      margin-bottom: 0;
    }

    .u-section-5 .u-text-6 {
      font-weight: 700;
      font-size: 1.5rem;
      text-transform: none;
    }

    .u-section-5 .u-text-7 {
      font-style: normal;
    }

    .u-section-5 .u-list-item-3 {
      background-image: none;
      box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.15);
    }

    .u-section-5 .u-container-layout-3 {
      padding: 20px;
    }

    .u-section-5 .u-image-6 {
      height: 196px;
      margin-top: 0;
      margin-bottom: 0;
    }

    .u-section-5 .u-text-6 {
      font-weight: 700;
      font-size: 1.5rem;
      text-transform: none;
    }

    .u-section-5 .u-text-7 {
      font-style: normal;
    }

    @media (max-width: 1199px) {
      .u-section-5 .u-list-1 {
        margin-right: initial;
        margin-left: initial;
      }

      .u-section-5 .u-repeater-1 {
        grid-template-columns: repeat(3, calc(33.333333333333336% - 13.3333px));
        min-height: 463px;
      }

      .u-section-5 .u-container-layout-1 {
        padding: 30px;
      }

      .u-section-5 .u-image-1 {
        height: 162px;
      }

      .u-section-5 .u-text-2 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-3 {
        margin: 35px auto 0 0;
      }

      .u-section-5 .u-container-layout-2 {
        padding: 30px;
      }

      .u-section-5 .u-image-2 {
        height: 162px;
      }

      .u-section-5 .u-text-4 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-5 {
        margin: 35px auto 0 0;
      }

      .u-section-5 .u-container-layout-3 {
        padding: 30px;
      }

      .u-section-5 .u-image-3 {
        height: 162px;
      }

      .u-section-5 .u-text-6 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-7 {
        margin: 35px auto 0 0;
      }

      .u-section-5 .u-container-layout-3 {
        padding: 30px;
      }

      .u-section-5 .u-image-4 {
        height: 162px;
      }

      .u-section-5 .u-text-6 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-7 {
        margin: 35px auto 0 0;
      }

      .u-section-5 .u-container-layout-3 {
        padding: 30px;
      }

      .u-section-5 .u-image-5 {
        height: 162px;
      }

      .u-section-5 .u-text-6 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-7 {
        margin: 35px auto 0 0;
      }

      .u-section-5 .u-container-layout-3 {
        padding: 30px;
      }

      .u-section-5 .u-image-6 {
        height: 162px;
      }

      .u-section-5 .u-text-6 {
        margin: 12px 0 0;
      }

      .u-section-5 .u-text-7 {
        margin: 35px auto 0 0;
      }
    }

    @media (max-width: 991px) {
      .u-section-5 .u-repeater-1 {
        grid-template-columns: repeat(2, calc(50% - 9.999975px));
        min-height: 798px;
      }

      .u-section-5 .u-image-1 {
        height: 186px;
      }

      .u-section-5 .u-image-2 {
        height: 186px;
      }

      .u-section-5 .u-image-3 {
        height: 186px;
      }

      .u-section-5 .u-image-4 {
        height: 186px;
      }

      .u-section-5 .u-image-5 {
        height: 186px;
      }

      .u-section-5 .u-image-6 {
        height: 186px;
      }
    }

    @media (max-width: 767px) {
      .u-section-5 .u-text-1 {
        width: 540px;
      }

      .u-section-5 .u-repeater-1 {
        grid-template-columns: 100%;
      }

      .u-section-5 .u-container-layout-1 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-1 {
        height: 279px;
      }

      .u-section-5 .u-container-layout-2 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-2 {
        height: 279px;
      }

      .u-section-5 .u-container-layout-3 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-3 {
        height: 279px;
      }

      .u-section-5 .u-container-layout-3 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-4 {
        height: 279px;
      }

      .u-section-5 .u-container-layout-3 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-5 {
        height: 279px;
      }

      .u-section-5 .u-container-layout-3 {
        padding-left: 10px;
        padding-right: 10px;
      }

      .u-section-5 .u-image-6 {
        height: 279px;
      }
    }

    @media (max-width: 575px) {
      .u-section-5 .u-text-1 {
        width: 340px;
        font-size: 1.875rem;
      }

      .u-section-5 .u-image-1 {
        height: 176px;
      }

      .u-section-5 .u-image-2 {
        height: 176px;
      }

      .u-section-5 .u-image-3 {
        height: 176px;
      }

      .u-section-5 .u-image-4 {
        height: 176px;
      }

      .u-section-5 .u-image-5 {
        height: 176px;
      }

      .u-section-5 .u-image-6 {
        height: 176px;
      }
    }
  </style>



  <script src="html2pdf.bundle.min.js"></script>
  <script src="script.js"></script>
</head>

<body class="w3-light-grey">

  <!-- Top container -->
  <div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
    <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i
        class="fa fa-bars"></i> &nbsp;Menu</button>
    <span class="w3-bar-item w3-lef"> <img src="./static/logo.png" class=" w3-margin-right" style="width:36px"><a
        id="nusuario"></a></span>
    <span class="w3-bar-item w3-right "> <a href="Inicio">Cerrar </a></span>

  </div>


  <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
    <div class="w3-container w3-row">
      <div class="w3-col s4">
        <img src="./static/avatar2.png" class="w3-circle w3-margin-right" style="width:200px">
      </div>
      <div class="w3-col s8 w3-bar">
        <h5 class="text"><a id="nusuario"></a> </h5>

      </div>
    </div>
    <hr>
    <div class="w3-container">

    </div>
    <div class="w3-bar-block">
      <a href="admin" class="w3-bar-item w3-button w3-padding w3-blue"><i class="fa fa-users fa-fw"></i>&nbsp; Stickers
        Cargados</a>
      <a href="Editar" class="w3-bar-item w3-button w3-padding"><i class="fa fa-bell fa-fw"></i>&nbsp; Editar Perfil</a>

    </div>
  </nav>


  <!-- Overlay effect when opening sidebar on small screens -->
  <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer"
    title="close side menu" id="myOverlay"></div>

  <!-- !PAGE CONTENT! -->

  <div class="w3-main" style="margin-left:310px;margin-top:50px;">

    <body onload="CargarInfo()" id="main">
      <br>
      <h5>Cargar Stickers</h5>
      <input type="file" name="hola" id="file-pb">
      <button style="width:10%" onclick="guardarPublicaciones()" type="button" class="btn btn-danger">Cargar</button>


      <section class="u-align-center u-clearfix u-grey-5 u-section-5" id="carousel_28bb">
        <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
          <h3 style="w3"> Estampillas Guardadas</h3>
          <div class="u-expanded-width u-list u-list-1">
            <div class="u-repeater u-repeater-1">


              <table>
                <tbody id="CuerpoStickers">
                </tbody>
              </table>


            </div>
          </div>
        </div>
      </section>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>


  <script>
    function CargarInfo() {

      var nombre = document.querySelector('#nusuario')
      var iniciado = sessionStorage.usuario
      nombre.innerHTML = `${iniciado}`
      var contenido = document.querySelector('#CuerpoStickers')
      contenido.innerHTML = ""
      fetch(`/Stickers/${iniciado}`)

        .then(response => response.json())

        .catch(error => {
          console.log(error)
        })
        .then(res => {


          for (var i in res) {
            console.log(res[i].imagen)


            contenido.innerHTML +=
              `<div class="u-align-left u-container-style u-list-item u-repeater-item u-white u-list-item-1 animated fadeIn-played" data-animation-name="fadeIn" data-animation-duration="2000" data-animation-direction="" style="will-change: opacity; animation-duration: 2000ms;">
                <div class="u-container-layout u-similar-container u-container-layout-1">
                  <img class="u-expanded-width u-image u-image-default u-image-1" src="${res[i].imagen}" alt="" data-image-width="1619" data-image-height="1080">
                  <h4 class="u-text u-text-2">${res[i].nombre} ${res[i].apellido}</h4>
                  <p class="u-text u-text-default u-text-3">Id:  ${res[i].id} </p>
                  <p class="u-text u-text-default u-text-3">Seleccion: ${res[i].equipo}</p>
                  <p class="u-text u-text-default u-text-3">Region:  ${res[i].region}</p>
                </div>
              </div>`




          }

        })

    }


    function Crear() {
      sessionStorage.setItem("tipoR", 'administrador')
      location.href = "Registro";

    }




    function cargarSticker() {
      const xhttp = new XMLHttpRequest();
      xhttp.open('GET', './1.json', true);
      xhttp.responseType = 'json';
      xhttp.send();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText);
        }
      }
    }


    

    //asdasda
    function leerArchivoPb(e) {
      var archivo = e.target.files[0];
      if (!archivo) {
        return;
      }
      var lector = new FileReader();
      lector.onload = function (e) {
        var contenido = e.target.result;
        sessionStorage.setItem("contenidoPublicacion", contenido)
      };
      lector.readAsText(archivo);
    }

    //funcion para guardar publicaciones
    function guardarPublicaciones() {
      var contenido = sessionStorage.contenidoPublicacion
      let datos = JSON.parse(contenido)
      var iniciado = sessionStorage.usuario

      for (let dato of datos) {
        console.log(dato)
        fetch( `/cargaSt/${iniciado}`, {
          method: 'POST',
          body: JSON.stringify(dato),
          headers: {
            'Content-Type': 'application/json'
          }
        }).then(res => res.json())
          .catch(err => {
            console.error('Error', err)
          })
          .then(response => {
            console.log(response)
          })
      }
      
      alert("Publicaciones Subidas, cargue otra vez la pagina")
      CargarInfo()
    }

    //obtener evento archivo publicacion
    try {
      document.getElementById('file-pb')
        .addEventListener('change', leerArchivoPb, false);
    } catch (error) { }



  </script>




</body>

</html>